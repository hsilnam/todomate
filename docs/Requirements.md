# 기능 / 비기능 요구사항 정리

## 기능 요구사항
- 유저
  - 로그인
    - 이메일, 비밀번호를 통해 로그인할 수 있도록 로그인 폼을 제공해야함
    - 로그인에 성공했다면 
      - 이메일 인증이 완료된 유저인지 체크 후 인증이 되지 않은 유저라면 로그아웃
    - 로그인에 실패했다면 (아이디, 비밀번호 불일치) '입력하신 내용을 다시 확인해주세요'를 출력해야함
    - '비밀번호 찾기' 버튼을 제공해야함
      - 이메일 입력 후 비밀번호 찾기 버튼을 누르면 이메일로 비밀번호를 재설정할 수 있는 페이지를 제공해야함
      - 존재하지 않는 이메일을 입력했다면 '작업을 완료하지 못했습니다'를 출력해야함
  - 로그아웃
    - 버튼을 누르면 '로그아웃 하시겠습니까?'라는 컨펌 메세지가 출력되도록 함 
    - 로그아웃 시 로그인 페이지로 연결하도록 함
  - 회원가입
      - 이용약관에 대한 내용과 동의 여부를 받을 수 있는 폼을 제공해야함
      - 이메일, 아이디, 비밀번호, 비밀번호 확인을 입력값으로 받는 폼을 제공해야함
        - 중복된 아이디라면 '이미 사용 중인 이메일 입니다'를 출력해야함
        - 입력값 유효성 검사 실패 시 해당 입력값의 실패 문구 출력
      - 회원가입 성공 시 해당 이메일로 인증 메일 전송해 가입 인증 페이지 링크를 제공해야함
        - 인증 성공, 실패에 따라 페이지 문구를 다르게 해야함
      - 이메일을 통해 인증을 성공한 후 인증하기 버튼을 통해 회원가입 완료 
        - 인증 성공 시 로그인 페이지로 이동
        - 인증 실패 시 '이 이메일은 아직 인증되지 않았습니다. 인증 이메일을 다시 받으시겠습니까?'라는 컨펌 메세지가 출력되도록 함 (이메일 재전송)

## 비기능 요구사항
- 공통
  - 시스템은 1년 365일, 하루 24시간 운용이 가능해야함
  - 유저 request값과 DB query 시 반환되는 값에 대하여 XSS 필터링 처리
- 유저
  - 로그인
    - 로그인 성공 시 JWT을 발급
    - Refresh Token, Access Token으로 관리
    - Refresh Token은 DB에 별도의 테이블로 저장
    - JWT은 서버에서만 정보를 암복호화 할 수 있도록 대칭키 암호화 사용
    - 동일 유저에 대하여 1초 내에 3번만 로그인 시도 가능
  - 로그아웃
    - 로그인 중인 유저가 15일간 접속 기록이 없다면 자동 로그아웃 시김
  - 회원가입
    - 비밀번호 저장 시 단반향 암호화(SHA256, SALT) 처리
    - SALT값은 별도의 데이터베이스에 별도의 테이블로 저장
    - 유저 정보와 암호 정보는 한 트렌젝션으로 처리
    - 유효성 검사
      - 이메일
        - 형태: Local@Domain.com
        - 길이: 5-324 (Local: 1-64, Domain: 1-255)
        - 구성: RFC 5322 (Internet Message Format) 기준
      - 아이디
        - 길이: 6-12자
        - 구성: 영문 대소문자, 숫자, 기호(-_)
        - 기타: 중복 검사 필요
      - 비밀번호
        - 길이: 8-20자
        - 구성: 영문 대문자, 소문자, 숫자, 기호(ASCII 표준 문자만 해당) 중 3종류 문자 조합
    - 이메일 인증
      - 인증 여부 테이블 별도로 존재
      - 이미 인증을 완료한 경우, 재발급한 인증이 존재하는 경우, 인증이 만료된 경우(2분) 해당 인증을 파기해야함
  - 90일 주기로 비밀번호 변경 요청 